<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Upload - Data Pipeline</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      html {
        overflow-x: hidden;
        width: 100%;
        max-width: 100%;
      }

      body {
        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
        background: #ffffff;
        color: #000000;
        min-height: 100vh;
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 20px;
        position: relative;
        overflow-x: hidden;
        width: 100%;
        max-width: 100%;
      }

      body::before {
        content: "";
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background-image: url('https://i.pinimg.com/736x/84/5b/0c/845b0cccab795cd765334cfc3e096341.jpg');
        background-size: cover;
        background-position: center;
        background-repeat: no-repeat;
        z-index: 0;
      }

      body::after {
        content: "";
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: rgba(84, 8, 66, 0.356);
        backdrop-filter: blur(50px);
        -webkit-backdrop-filter: blur(8px);
        z-index: 1;
        pointer-events: none;
      }

      .container {
        max-width: 600px;
        width: 100%;
        background: rgba(255, 255, 255, 0.452);
        border: 2px solid #000000;
        backdrop-filter: blur(80px);
        border-radius: 12px;
        padding: 40px;
        box-shadow: 0 8px 30px rgba(0, 0, 0, 0.2);
        position: relative;
        z-index: 2;
        backdrop-filter: blur(10px);
        -webkit-backdrop-filter: blur(10px);
      }

      h1 {
        font-size: 2rem;
        font-weight: 700;
        color: #000000;
        margin-bottom: 30px;
        text-align: center;
      }

      .upload-area {
        border: 2px dashed #000000;
        border-radius: 8px;
        padding: 10px 0px 10px 10px;
        width: 52%;
        margin-left: 25%;
        text-align: center;
        background: #f5f5f5;
        cursor: pointer;
        transition: all 0.3s ease;
        margin-bottom: 20px;
      }

      .upload-area:hover {
        border-color: rgba(108, 20, 87, 0.747);
        background: #ffffff;
      }

      .upload-area.has-file {
        border-color: rgba(108, 20, 87, 0.747);
        border-style: solid;
        background: rgba(124, 58, 237, 0.05);
      }

      .upload-icon {
        font-size: 3rem;
        color: #000000;
        margin-bottom: 15px;
      }

      .upload-area:hover .upload-icon {
        color:rgba(108, 20, 87, 0.747);
      }

      .upload-text {
        font-size: 1.1rem;
        font-weight: 600;
        color: #000000;
        margin-bottom: 8px;
      }

      .upload-hint {
        font-size: 0.9rem;
        color: #666666;
      }

      input[type="file"] {
        position: absolute;
        opacity: 0;
        width: 100%;
        height: 100%;
        cursor: pointer;
      }

      .file-info {
        display: none;
        align-items: center;
        justify-content: space-between;
        padding: 15px;
        background: #f5f5f5;
        border-radius: 8px;
        margin-bottom: 20px;
      }

      .file-info.show {
        display: flex;
      }

      .file-name {
        font-weight: 600;
        color: #000000;
      }

      .remove-btn {
        background: #000000;
        color: #ffffff;
        border: none;
        width: 30px;
        height: 30px;
        border-radius: 50%;
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
        transition: all 0.3s ease;
      }

      .remove-btn:hover {
        background:rgba(108, 20, 87, 0.747);
        transform: rotate(90deg);
      }

      .upload-btn {
        width: 100%;
        padding: 15px;
        background: #000000;
        color: #ffffff;
        border: 2px solid #000000;
        border-radius: 8px;
        font-size: 1.1rem;
        font-weight: 700;
        cursor: pointer;
        transition: all 0.3s ease;
        text-transform: uppercase;
        letter-spacing: 1px;
      }

      .upload-btn:hover {
        background: rgba(108, 20, 87, 0.747);
        border-color: rgba(108, 20, 87, 0.747);
      }

      .upload-btn:disabled {
        opacity: 0.5;
        cursor: not-allowed;
      }

      .info-section {
        margin-top: 30px;
        padding-top: 30px;
        border-top: 1px solid #e0e0e0;
      }

      .info-title {
        font-size: 1rem;
        font-weight: 700;
        color: #000000;
        margin-bottom: 15px;
        text-transform: uppercase;
        letter-spacing: 1px;
      }

      .info-text {
        font-size: 0.9rem;
        color: #171717;
        line-height: 1.6;
        margin-bottom: 10px;
      }

      .info-text strong {
        color: #000000;
      }

      .loading {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: rgba(0, 0, 0, 0.7);
        align-items: center;
        justify-content: center;
        z-index: 10000;
      }

      .loading.show {
        display: flex;
      }

      .spinner {
        width: 50px;
        height: 50px;
        border: 4px solid rgba(255, 255, 255, 0.3);
        border-top-color: #ffffff;
        border-radius: 50%;
        animation: spin 1s linear infinite;
      }

      @keyframes spin {
        to { transform: rotate(360deg); }
      }

      @media (max-width: 768px) {
        .container {
          padding: 30px 20px;
        }

        h1 {
          font-size: 1.5rem;
        }
      }
    </style>
  </head>
  <body>
    <div class="container">
      <h1>Admin Upload</h1>
      
      <form action="/upload" method="post" enctype="multipart/form-data" id="uploadForm">
        <div class="upload-area" id="uploadArea">
          <input type="file" id="fileInput" name="file" accept=".xlsx,.xls,.csv" required>
          <div class="upload-icon">
            <i class="fas fa-cloud-upload-alt"></i>
          </div>
          <div class="upload-text">Choose File</div>
          <div class="upload-hint">Excel (.xlsx, .xls) or CSV (.csv)</div>
        </div>

        <div class="file-info" id="fileInfo">
          <span class="file-name" id="fileName"></span>
          <button type="button" class="remove-btn" id="removeBtn">
            <i class="fas fa-times"></i>
          </button>
        </div>

        <button type="submit" class="upload-btn" id="uploadBtn">
          Upload & Process
        </button>
      </form>

      <div class="info-section">
        <div class="info-title">Required Columns</div>
        <div class="info-text"><strong>Topic</strong> - Main subject (required)</div>
        <div class="info-text"><strong>Text</strong> - Main content (required)</div>
        <div class="info-text" style="margin-top: 15px; font-size: 0.85rem;">
          Optional: Treatment Date, Treatment Country, Treatment Given
        </div>
      </div>
    </div>

    <div class="loading" id="loading">
      <div class="spinner"></div>
    </div>

    <script>
      const fileInput = document.getElementById('fileInput');
      const uploadArea = document.getElementById('uploadArea');
      const fileInfo = document.getElementById('fileInfo');
      const fileName = document.getElementById('fileName');
      const removeBtn = document.getElementById('removeBtn');
      const uploadForm = document.getElementById('uploadForm');
      const uploadBtn = document.getElementById('uploadBtn');
      const loading = document.getElementById('loading');

      uploadArea.addEventListener('click', function(e) {
        if (e.target !== fileInput && e.target.closest('input[type="file"]') === null) {
          fileInput.click();
        }
      });

      fileInput.addEventListener('change', function(e) {
        if (e.target.files && e.target.files[0]) {
          fileName.textContent = e.target.files[0].name;
          fileInfo.classList.add('show');
          uploadArea.classList.add('has-file');
        }
      });

      removeBtn.addEventListener('click', function(e) {
        e.stopPropagation();
        fileInput.value = '';
        fileInfo.classList.remove('show');
        uploadArea.classList.remove('has-file');
      });

      uploadForm.addEventListener('submit', function(e) {
        if (!fileInput.files || !fileInput.files[0]) {
          e.preventDefault();
          alert('Please select a file.');
          return false;
        }
        loading.classList.add('show');
        uploadBtn.disabled = true;
        return true;
      });
    </script>
  </body>
</html>
